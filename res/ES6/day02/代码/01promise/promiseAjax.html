<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			var httpUrl = "https://api.apiopen.top/getJoke?page=1&count=2&type=video"
			var ajaxP = getAjax(httpUrl)
			
			function getAjax(url){
				return new Promise(function(resolve,reject){
					//1创建xhr
					var xhr = new XMLHttpRequest()
					//2设置路径 
					var httpUrl = url;
					xhr.open('GET',httpUrl)
					
					//3监听
					xhr.onreadystatechange = function(){
						if(xhr.status==200&&xhr.readyState==4){
							//处理获取得到的数据
							resolve(xhr)
						}else if(xhr.readyState==4&&xhr.status!=200){
							//处理失败的结果
							reject(xhr)
						}
					}
					//4发送
					xhr.send()
				}) 
			}
			
			console.log(ajaxP)
			
			// ajaxP.then(function(res){
			// 	var result = JSON.parse(res.response)
			// 	console.log(res)
			// 	console.log(result)
			// }).catch(function(err){
			// 	console.log(res)
			// })
			
			//fetch原生的封装好的ajax
			fetch(httpUrl).then(function(res){
				console.log(res)
				var result = res.json()
				result.then(function(result){
					console.log(result)
				})
			})
		</script>
	</body>
</html>
